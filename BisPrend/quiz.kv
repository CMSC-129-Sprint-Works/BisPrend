
<QuizPage>:
    BoxLayout:
        id: background
        orientation: 'vertical'
        padding: "10dp"
        spacing: "10dp"
        bg: ""
        canvas:
            Rectangle:
                size: root.width, root.height
                source: self.bg
        RelativeLayout:
            id: score_board
            size_hint: 1, .15
        ScreenManager:
            id: quiz_manager
            Menu:
            MultipleChoice:
            TrueOrFalse:
            FillInTheBlank:
            MatchingType:
            FinalResult:
            BlankScreen:

# QUIZ SCREENS
<Menu>:
    name: "menu"
    BoxLayout:
        orientation: "vertical"
        spacing: "20dp"
        Label:
            text: "Welcome to Bisaya Quiz"
            color: 0,0,0,1
            font_name: "Mont"
            font_size: "35sp"
            size_hint_y: None
            text_size: self.size
            halign: "center"
            valign: "middle"
        Button:
            id: quiz_std_btn
            text: "Start"
            font_name: "Mont"
            font_size: "18sp"
            # color: 0,0,0,1
            # background_normal: ''
            # background_down: ''
            # background_color: (1,0.8,0.4,1) if self.state == 'normal' else (1,0.8,0.4,.7)
            size_hint: None, None
            width: self.texture_size[0] + dp(100)
            height: self.texture_size[1] + dp(30)
            pos_hint: {"center_x": .5}
            on_release:
                root.manager.parent.parent.loadQuizItems()
        Button:
            text: "Back"
            font_name: quiz_std_btn.font_name
            font_size: quiz_std_btn.font_size
            color: quiz_std_btn.color
            background_normal: quiz_std_btn.background_normal
            background_down: quiz_std_btn.background_down
            # background_color: (1,0.8,0.4,1) if self.state == 'normal' else (1,0.8,0.4,.7)
            size_hint: None, None
            size: quiz_std_btn.size
            pos_hint: quiz_std_btn.pos_hint
            on_release:
                root.manager.parent.parent.manager.transition.direction = "right"
                root.manager.parent.parent.manager.current = "Subcategory"
        Button:
            text: "Exit"
            font_name: quiz_std_btn.font_name
            font_size: quiz_std_btn.font_size
            color: quiz_std_btn.color
            background_normal: quiz_std_btn.background_normal
            background_down: quiz_std_btn.background_down
            # background_color: (1,0.8,0.4,1) if self.state == 'normal' else (1,0.8,0.4,.7)
            size_hint: None, None
            size: quiz_std_btn.size
            pos_hint: quiz_std_btn.pos_hint
            on_release:
                root.on_exit_pressed()
        BoxLayout:

<MultipleChoice>:
    name: "multiple-choice"
    BoxLayout:
        orientation: "vertical"
        padding: "10dp"
        spacing: "10dp"
        canvas:
            Color:
                rgba: 1,1,1,.8
            Rectangle:
                size: root.width, root.height
        Image:
            id: entry
            source: "bg/bg-1.jpg"
        BoxLayout:
            spacing: "5dp"
            orientation: "vertical"
            ChoiceToggleBtn:
                id: choice_1
                text: ""
                on_state: root.on_choice_toggle(self)
            ChoiceToggleBtn:
                id: choice_2
                text: ""
                on_state: root.on_choice_toggle(self)
            ChoiceToggleBtn:
                id: choice_3
                text: ""
                on_state: root.on_choice_toggle(self)
            ChoiceToggleBtn:
                id: choice_4
                text: ""
                on_state: root.on_choice_toggle(self)
        RelativeLayout:
            id: check_btn
            size_hint: 1, .2

<TrueOrFalse>
    name: "true-or-false"
    BoxLayout:
        orientation: "vertical"
        padding: "10dp"
        spacing: "10dp"
        canvas:
            Color:
                rgba: 1,1,1,.8
            Rectangle:
                size: root.width, root.height
        BoxLayout:
            orientation: "vertical"
            spacing: "10dp"
            Image:
                id: entry
                source: "bg/bg-1.jpg"
            AnchorLayout:
                anchor_y: "top"
                size_hint: 1, .05
                Label:
                    id: entry_name
                    text: "Entry Name"
                    color: 0,0,0,1
                    font_size: "24dp"
            Label:
                text: ""
                size_hint: 1, .1
        BoxLayout:
            spacing: "5dp"
            orientation: "vertical"
            size_hint: 1, .3
            ChoiceToggleBtn:
                id: choice_1
                text: "Sakto"
                on_state: root.on_choice_toggle(self)
            ChoiceToggleBtn:
                id: choice_2
                text: "Sayop"
                on_state: root.on_choice_toggle(self)
        RelativeLayout:
            id: check_btn
            size_hint: 1, .15

<FillInTheBlank>
    name: "fill-in-the-blank"
    BoxLayout:
        orientation: "vertical"
        padding: "10dp"
        spacing: "10dp"
        canvas:
            Color:
                rgba: 1,1,1,.8
            Rectangle:
                size: root.width, root.height
        BoxLayout:
            orientation: "vertical"
            spacing: "10dp"
            Image:
                id: entry
                source: "bg/bg-1.jpg"
            AnchorLayout:
                anchor_y: "top"
                size_hint: 1, .05
                Label:
                    id: entry_name
                    markup: True
                    text: "Entry Name"
                    color: 0,0,0,1
                    font_size: "24dp"
                    text_size: self.width, None
                    size_hint: 1, None
                    height: self.texture_size[1]
                    halign: 'center'
                    valign: 'top'
            Label:
                text: ""
                size_hint: 1, .1
        GridLayout:
            cols: 3
            spacing: "5dp"
            # orientation: "vertical"
            size_hint: .7, .3
            pos_hint: {"center_x": .5}
            FITBbutton:
                id: choice_1
                text: "_"
                on_state: root.on_choice_toggle(self)
            FITBbutton:
                id: choice_2
                text: "_"
                on_state: root.on_choice_toggle(self)
            FITBbutton:
                id: choice_3
                text: "_"
                on_state: root.on_choice_toggle(self)
            FITBbutton:
                id: choice_4
                text: "_"
                on_state: root.on_choice_toggle(self)
            FITBbutton:
                id: choice_5
                text: "_"
                on_state: root.on_choice_toggle(self)
            FITBbutton:
                id: choice_6
                text: "_"
                on_state: root.on_choice_toggle(self)
        RelativeLayout:
            id: check_btn
            size_hint: 1, .15

<MatchingType>
    name: "matching-type"
    BoxLayout:
        orientation: "vertical"
        padding: "2dp"
        spacing: "5dp"
        canvas:
            Color:
                rgba: 1,1,1,.8
            Rectangle:
                size: root.width, root.height
        MATcanvas:
            id: mat_canvas
            MATLastTouch:
                pos_hint: {"center_x": .5, "center_y": .1}
            Image:
                id: entry_img_1
                source: ""
                size_hint: .4, .19
                pos_hint: {"x": .6, "center_y": .9}
            MATBtnLetter:
                text: "A"
                pos_hint: {"right": .6, "center_y": .9}
                answer: entry_img_1.source
            Image:
                id: entry_img_2
                source: ""
                size_hint: .4, .19
                pos_hint: {"x": .6, "center_y": .7}
            MATBtnLetter:
                text: "B"
                pos_hint: {"right": .6, "center_y": .7}
                answer: entry_img_2.source
            Image:
                id: entry_img_3
                source: ""
                size_hint: .4, .19
                pos_hint: {"x": .6, "center_y": .5}
            MATBtnLetter:
                text: "C"
                pos_hint: {"right": .6, "center_y": .5}
                answer: entry_img_3.source
            Image:
                id: entry_img_4
                source: ""
                size_hint: .4, .19
                pos_hint: {"x": .6, "center_y": .3}
            MATBtnLetter:
                text: "D"
                pos_hint: {"right": .6, "center_y": .3}
                answer: entry_img_4.source
            Image:
                id: entry_img_5
                source: ""
                size_hint: .4, .19
                pos_hint: {"x": .6, "center_y": .1}
            MATBtnLetter:
                text: "E"
                pos_hint: {"right": .6, "center_y": .1}
                answer: entry_img_5.source

            Label:
                id: entry_name_1
                text: ""
                color: 0,0,0,1
                size_hint: .3, .19
                pos_hint: {"right": .3, "center_y": .9}
                text_size: self.size
                halign: 'center'
                valign: 'middle'
            MATBtnNumber:
                text: "1"
                pos_hint: {"x": .3, "center_y": .9}
                answer: entry_name_1.text
            Label:
                id: entry_name_2
                text: ""
                color: 0,0,0,1
                size_hint: .3, .19
                pos_hint: {"right": .3, "center_y": .7}
                text_size: self.size
                halign: 'center'
                valign: 'middle'
            MATBtnNumber:
                text: "2"
                pos_hint: {"x": .3, "center_y": .7}
                answer: entry_name_2.text
            Label:
                id: entry_name_3
                text: ""
                color: 0,0,0,1
                size_hint: .3, .19
                pos_hint: {"right": .3, "center_y": .5}
                text_size: self.size
                halign: 'center'
                valign: 'middle'
            MATBtnNumber:
                text: "3"
                pos_hint: {"x": .3, "center_y": .5}
                answer: entry_name_3.text
            Label:
                id: entry_name_4
                text: ""
                color: 0,0,0,1
                size_hint: .3, .19
                pos_hint: {"right": .3, "center_y": .3}
                text_size: self.size
                halign: 'center'
                valign: 'middle'
            MATBtnNumber:
                text: "4"
                pos_hint: {"x": .3, "center_y": .3}
                answer: entry_name_4.text
            Label:
                id: entry_name_5
                text: ""
                color: 0,0,0,1
                size_hint: .3, .19
                pos_hint: {"right": .3, "center_y": .1}
                text_size: self.size
                halign: 'center'
                valign: 'middle'
            MATBtnNumber:
                text: "5"
                pos_hint: {"x": .3, "center_y": .1}
                answer: entry_name_5.text
        RelativeLayout:
            id: check_btn
            size_hint: 1, .1

<BlankScreen>
    name: "blank-screen"

<FinalResult>
    name: "final-result"
    BoxLayout:
        orientation: "vertical"
        pos_hint: {"center_x": .5, "top": 1}
        size_hint: None, .85
        width: root.width if root.width <= self.height else self.height
        BoxLayout:
            orientation: "vertical"
            padding: "20dp", "10dp"
            canvas:
                Color:
                    rgba: 1,1,1,1
                Rectangle:
                    size: self.size
                    pos: self.pos
            Widget: #blank space
            BoxLayout:
                orientation: "vertical"
                padding: "5dp"
                spacing: "5dp"
                size_hint: None, None
                size: dp(100), dp(60)
                pos_hint: {"center_x": .5}
                canvas:
                    Color:
                        rgba: 0,0,0,1
                    Line:
                        rectangle: (self.x,self.y,self.width, self.height)
                    Line:
                        points: (self.x, self.top-20, self.right, self.top-20)
                Label:
                    text: "Score"
                    color: 0,0,0,1
                    font_name: "Mont"
                    size_hint: 1, .33
                Label:
                    id: final_score
                    text: "0"
                    color: 0,0,0,1
                    font_size: 30
            Label:
                markup: True
                text: "[i]Congratulations![/i]"
                color: 0,0,0,1
                font_size: "24dp"
                size_hint_y: None
                padding: [0, 20]
                height: self.texture_size[1]
                text_size: self.size
                halign: 'center'
                valign: 'middle'
            Label:
                id: result
                markup: True
                text: "You completed the quiz."
                color: 0,0,0,1
                font_size: "14dp"
                size_hint_y: None
                text_size: self.size
                halign: 'center'
                valign: 'middle'
            Widget: #blank space
            BoxLayout:
                size_hint: None, None
                pos_hint: {"center_x": .5, "center_y": .5}
                MDRaisedButton:
                    text: "OK"
                    md_bg_color: 72/255, 127/255, 165/255, 1
                    pos_hint: {"center_y": .5}
                    on_release: root.on_back_pressed()


#LAYOUTS
<ScoreBoard>
    orientation: "horizontal"
    Button:
        text: "Back"
        size_hint: .2, 1
        pos_hint: {"x": 0}
        on_release: root.parent.parent.parent.showPauseDialog()
    BoxLayout:
        orientation: "vertical"
        padding: "5dp"
        spacing: "5dp"
        size_hint: .4, 1
        pos_hint: {"right": .65}
        canvas:
            Color:
                rgba: 1,1,1,.8
            Rectangle:
                size: self.size
                pos: self.pos
            Color:
                rgba: 0,0,0,1
            Line:
                rectangle: (self.x,self.y,self.width, self.height)
            Line:
                points: (self.x, self.top*.66, self.right, self.top*.66)
        Label:
            text: "Question"
            color: 0,0,0,1
            font_name: "Mont"
            size_hint: 1, .33
        Label:
            id: question_num
            text: ""
            color: 0,0,0,1
            font_size: 30
    BoxLayout:
        orientation: "vertical"
        padding: "5dp"
        spacing: "5dp"
        size_hint: .3, 1
        pos_hint: {"right": 1}
        canvas:
            Color:
                rgba: 1,1,1,.8
            Rectangle:
                size: self.size
                pos: self.pos
            Color:
                rgba: 0,0,0,1
            Line:
                rectangle: (self.x,self.y,self.width, self.height)
            Line:
                points: (self.x, self.top*.66, self.right, self.top*.66)
        Label:
            text: "Score"
            color: 0,0,0,1
            font_name: "Mont"
            size_hint: 1, .33
        Label:
            id: score
            text: "0"
            color: 0,0,0,1
            font_size: 30
        

# DIALOGS/POPUPS
<QuizPauseDialog>
    auto_dismiss: False
    size_hint: .7, .5
    BoxLayout:
        orientation: "vertical"
        canvas:
            Color:
                rgba: 1,1,1,1
            Rectangle:
                size: root.size
                pos: root.pos
        Label:
            text: "Quiz Paused"
            font_name: "Mont"
            font_size: "24dp"
            color: 0,0,0,1
            size_hint_y: None
            text_size: self.size
            halign: "center"
            valign: "middle"
        Button:
            text: "Resume Quiz"
            on_release: root.dismiss() 
        Button:
            id: exit_btn
            text: "Exit Quiz"
            on_release: root.dismiss()
            
<CheckResultDialog>
    auto_dismiss: False
    size_hint: .7, .5
    BoxLayout:
        orientation: "vertical"
        canvas:
            Color:
                rgba: 1,1,1,1
            Rectangle:
                size: root.size
                pos: root.pos
        AnchorLayout:
            anchor_x: "center"
            anchor_y: "bottom"
            Label:
                id: result
                markup: True
                text: "[color=#000000]RESULT[/color]"
                font_size: "24dp"
                color: 0,0,0,1
                size_hint: 1, .3
        StackLayout:
            anchor_x: "center"
            anchor_y: "top"
            Label:
                id: description
                markup: True
                text: "+0 point"
                # font_name: "Mont"
                font_size: "14dp"
                color: 0,0,0,1
                size_hint: 1, .2
